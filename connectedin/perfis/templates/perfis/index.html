{% extends "perfis/base.html" %}

{% block body %}

<div class="col-lg-12">

    <div class="panel panel-default">
        <div class="panel-heading">
            <strong>Todos os Perfis</strong>
        </div>
        {% if perfis %}
            <ul class="list-group">
                {% for perfil in perfis %}
                    <a href="{% url 'exibir' perfil.id %}" class="list-group-item">{{ perfil.nome }} // {{ perfil.email }}</a>
                {% endfor %}
            </ul>
        {% else %}
            <div class="panel-body">
                <p>Nenhum Perfil encontrado</p>
            </div>
        {% endif %}
    </div>

    <div class="panel panel-default">
        {% with total_de_convites=perfil_logado.convites_recebidos.count %}
            {% if total_de_convites %}
                <div class="panel-heading">
                        <strong>Você tem {{total_de_convites}} convite{{ total_de_convites|pluralize }} aguardando aprovação</strong>
                </div>
                <ul class="list-group">
                    {% for convite in perfil_logado.convites_recebidos.all %}
                        <li class="list-group-item">
                                {{ convite.solicitante.nome }} 
                                <a href="{% url 'conectar' convite.id %}" class="pull-right">aceitar</a>
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <div class="panel-body">
                    <p>Nenhum convite recebido :(</p>
                </div>
            {% endif %}
        {% endwith %}
    </div>

</div>

{% endblock %}